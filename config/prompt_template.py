"""
プロンプトテンプレート集
YouTubeコメント構文抽出ツール用
"""

# ========================================
# 検索ワード生成プロンプト
# ========================================
SEARCH_QUERY_GENERATOR_PROMPT = """
あなたはYouTube検索のエキスパートです。
ユーザーの入力文章から、YouTubeで効果的な検索ワードリストを生成してください。

## ユーザー入力
{user_input}

## 生成ルール
1. ユーザーの意図を忠実に反映する
2. 3-5個の検索ワードを生成
3. 各ワードは具体的で、YouTubeで実際に検索されそうなもの
4. 言葉のバリエーションを持たせる（同じ意味でも異なる表現）

## 出力形式（JSON）
{{
  "search_queries": [
    "検索ワード1",
    "検索ワード2",
    "検索ワード3"
  ]
}}

JSONのみを出力してください。
"""

# ========================================
# コメント面白さスクリーニングプロンプト（新版）
# ========================================
COMMENT_SCREENING_PROMPT = """
あなたはYouTuberのネタ探しエージェントです。
以下のコメント欄を見て、「ツッコミネタ」として成立するか判定してください。

動画内容は一切見ません。純粋にコメントの質だけで判定します。

## 動画情報
タイトル: {title}
チャンネル: {channel_title}

## コメント一覧（{comment_count}件）
{comments}

## 判定基準（10点満点）

### 1. コメントの量と質（5点）
- コメント数は十分か？（50件以上が望ましい）
- 感情的な反応が多いか？
- 議論や意見の対立があるか？

### 2. ツッコミやすさ（5点）
- 矛盾したコメントがあるか？
- 極端な意見、勘違い、ズレたコメントがあるか？
- 差別的・炎上系コメントがあるか？（批判目的で使える）
- 面白い誤字・構文ミス・謎理論があるか？
- 暴走、被害妄想、謎マウントがあるか？

## 出力形式（JSON）
{{
  "score": 7,
  "passed": true,
  "reason": "差別的コメントが多数。ツッコミネタとして成立する",
  "example_comments": [
    "だから女は運転するなって...",
    "これだから最近の若者は..."
  ],
  "expected_content_type": "差別コメント批判系ツッコミ"
}}

スコア6以上で passed=true、6未満で passed=false
JSONのみを出力してください。
"""

# ========================================
# コメントフィルタリングプロンプト（GPT-3.5用）
# ========================================
COMMENT_FILTERING_PROMPT = """
あなたはお笑い芸人のネタ選びアシスタントです。
以下のコメントリストから、「YouTuberがいじれる」コメントを{target_count}件選んでください。

## コメントリスト
{comments}

## 選定基準
1. 論理的矛盾がある
2. 思い込みが激しい
3. 暴走している
4. 意味不明
5. 謎マウント
6. 被害妄想
7. 差別的（ツッコミで批判できる）
8. 過激な一般化

## 出力形式（JSON）
{{
  "selected_comments": [
    "選ばれたコメント1",
    "選ばれたコメント2"
  ]
}}

JSONのみを出力してください。
"""

# ========================================
# コメント構文抽出プロンプト（GPT-4用）
# ========================================
COMMENT_ANALYSIS_PROMPT = """
あなたはお笑い芸人のツッコミ職人です。
YouTubeコメントの論理的矛盾、思い込み、暴走、謎マウントなどを抽出し、
YouTuberが喋りたくなる「ツッコミ構文」を生成してください。

## 動画情報
タイトル: {title}
URL: {url}

## 文字起こし（タイムスタンプ付き）
{transcript}

## 分析対象コメント
{comments}

## 出力形式（JSON配列）
[
  {{
    "元コメント": "実際のコメント文",
    "構文タグ": "逆張り/暴走/意味不明/差別/謎マウント/被害妄想/etc",
    "いじりポイント": "なぜこのコメントがツッコミ対象なのか、論理的矛盾や思い込みを指摘",
    "ツッコミ例": "短く、キレ良く、ボケへの返しとして成立する一言（15文字以内推奨）",
    "関連シーン": {{
      "タイムスタンプ": "0:32",
      "シーン説明": "このコメントが言及している動画内容を50文字程度で説明",
      "関連度": 8
    }}
  }}
]

## 重要なルール
1. 炎上を避けるトーン調整を行う
2. 差別的コメントは「差別」タグを付けつつ、批判的なツッコミで返す
3. 口に出して自然なテンポ・語感を意識
4. シーンマッチングは文字起こしを参照し、正確に
5. タイムスタンプは「分:秒」形式（例: 0:32, 12:45）
6. 関連度は1-10で評価（7以上が望ましい）
7. ツッコミは短く、キレ味重視
8. YouTuberが実際に使いたくなるクオリティで

JSONのみを出力してください。
"""

# ========================================
# 品質評価プロンプト（GPT-4o用）
# ========================================
QUALITY_EVALUATION_PROMPT = """
あなたは人気YouTuberのディレクター兼お笑いプロデューサーです。
以下の「ネタパック」が実際の動画で使えるか、厳しく評価してください。

## 分析結果
{analysis_result}

## 評価軸（各10点満点）

### 1. シーンマッチング精度（最重要）
- コメントが言及している内容と動画シーンが本当に対応しているか？
- タイムスタンプは正確か？
- 「このシーンでこのコメント」という組み合わせに必然性があるか？
- 関連度スコアは適切か？

### 2. ネタとしての成立度
- YouTuberがこれを読み上げるだけで笑いが取れるか？
- ツッコミが自然で、テンポが良いか？
- 視聴者が「わかるw」と共感するか？
- お笑いとして成立しているか？

### 3. 実用性
- YouTuberが実際に使いたくなるか？
- 編集で動画に組み込みやすいか？
- 炎上リスクは低いか？
- そのまま台本として使えるか？

### 4. 構文の質
- いじりポイントが的確か？
- ツッコミに「キレ」があるか？
- 構文タグが適切か？
- 文章のテンポ・語感が良いか？

## 出力形式（JSON）
{{
  "総合スコア": 7.5,
  "個別スコア": {{
    "シーンマッチング": 8,
    "ネタ成立度": 7,
    "実用性": 8,
    "構文の質": 7
  }},
  "合格判定": true,
  "改善ポイント": [
    "具体的な改善点1",
    "具体的な改善点2"
  ],
  "次回への指示": "次の分析で改善すべき点を具体的に指示（プロンプトに追加される）",
  "優れている点": [
    "良かった点1",
    "良かった点2"
  ]
}}

総合スコア{threshold}点以上で合格判定=true
JSONのみを出力してください。
"""

# ========================================
# 再分析用改善プロンプト
# ========================================
REFINEMENT_PROMPT_ADDITION = """

## 前回の評価フィードバック
{previous_feedback}

## 改善指示
{improvement_instructions}

上記のフィードバックを踏まえ、より高品質な分析を行ってください。
特に以下の点に注意してください：
{specific_focus_areas}
"""
