"""
プロンプトテンプレート集
YouTubeコメント構文抽出ツール用
"""

# ========================================
# 検索ワード生成プロンプト
# ========================================
SEARCH_QUERY_GENERATOR_PROMPT = """
あなたはYouTube検索のエキスパートです。
ユーザーの入力文章から、YouTubeで効果的な検索ワードリストを生成してください。

## ユーザー入力
{user_input}

## 生成ルール
1. ユーザーの意図を忠実に反映する
2. 3-5個の検索ワードを生成
3. 各ワードは具体的で、YouTubeで実際に検索されそうなもの
4. 言葉のバリエーションを持たせる（同じ意味でも異なる表現）

## 出力形式（JSON）
{{
  "search_queries": [
    "検索ワード1",
    "検索ワード2",
    "検索ワード3"
  ]
}}

JSONのみを出力してください。
"""

# ========================================
# 早期スクリーニングプロンプト
# ========================================
EARLY_SCREENING_PROMPT = """
あなたはYouTuberのネタ探しアシスタントです。
この動画とコメントの組み合わせが「YouTuberのネタになるか」を判定してください。

## 動画情報
タイトル: {title}
説明: {description}

## 文字起こし（冒頭部分）
{transcript_sample}

## コメントサンプル（上位{comment_count}件）
{top_comments}

## 判定基準
1. コメントと動画内容に「ツッコミどころ」があるか？
2. 炎上、矛盾、暴走、意味不明、謎マウントなど、いじれる要素があるか？
3. YouTuberが喋って面白くなる可能性があるか？
4. コメントと動画シーンが実際に関連しているか？
5. YouTuberが実際に使いたくなるネタか？

## 出力形式（JSON）
{{
  "ネタ化可能性スコア": 7,
  "理由": "具体的な理由を100文字程度で",
  "推奨": "continue",
  "期待できるネタの種類": "差別的コメント×事故シーンのツッコミネタ"
}}

スコア5未満なら推奨="skip"、5以上なら推奨="continue"
JSONのみを出力してください。
"""

# ========================================
# コメントフィルタリングプロンプト（GPT-3.5用）
# ========================================
COMMENT_FILTERING_PROMPT = """
あなたはお笑い芸人のネタ選びアシスタントです。
以下のコメントリストから、「YouTuberがいじれる」コメントを{target_count}件選んでください。

## コメントリスト
{comments}

## 選定基準
1. 論理的矛盾がある
2. 思い込みが激しい
3. 暴走している
4. 意味不明
5. 謎マウント
6. 被害妄想
7. 差別的（ツッコミで批判できる）
8. 過激な一般化

## 出力形式（JSON）
{{
  "selected_comments": [
    "選ばれたコメント1",
    "選ばれたコメント2"
  ]
}}

JSONのみを出力してください。
"""

# ========================================
# コメント構文抽出プロンプト（GPT-4用）
# ========================================
COMMENT_ANALYSIS_PROMPT = """
あなたはお笑い芸人のツッコミ職人です。
YouTubeコメントの論理的矛盾、思い込み、暴走、謎マウントなどを抽出し、
YouTuberが喋りたくなる「ツッコミ構文」を生成してください。

## 動画情報
タイトル: {title}
URL: {url}

## 文字起こし（タイムスタンプ付き）
{transcript}

## 分析対象コメント
{comments}

## 出力形式（JSON配列）
[
  {{
    "元コメント": "実際のコメント文",
    "構文タグ": "逆張り/暴走/意味不明/差別/謎マウント/被害妄想/etc",
    "いじりポイント": "なぜこのコメントがツッコミ対象なのか、論理的矛盾や思い込みを指摘",
    "ツッコミ例": "短く、キレ良く、ボケへの返しとして成立する一言（15文字以内推奨）",
    "関連シーン": {{
      "タイムスタンプ": "0:32",
      "シーン説明": "このコメントが言及している動画内容を50文字程度で説明",
      "関連度": 8
    }}
  }}
]

## 重要なルール
1. 炎上を避けるトーン調整を行う
2. 差別的コメントは「差別」タグを付けつつ、批判的なツッコミで返す
3. 口に出して自然なテンポ・語感を意識
4. シーンマッチングは文字起こしを参照し、正確に
5. タイムスタンプは「分:秒」形式（例: 0:32, 12:45）
6. 関連度は1-10で評価（7以上が望ましい）
7. ツッコミは短く、キレ味重視
8. YouTuberが実際に使いたくなるクオリティで

JSONのみを出力してください。
"""

# ========================================
# 品質評価プロンプト（GPT-4o用）
# ========================================
QUALITY_EVALUATION_PROMPT = """
あなたは人気YouTuberのディレクター兼お笑いプロデューサーです。
以下の「ネタパック」が実際の動画で使えるか、厳しく評価してください。

## 分析結果
{analysis_result}

## 評価軸（各10点満点）

### 1. シーンマッチング精度（最重要）
- コメントが言及している内容と動画シーンが本当に対応しているか？
- タイムスタンプは正確か？
- 「このシーンでこのコメント」という組み合わせに必然性があるか？
- 関連度スコアは適切か？

### 2. ネタとしての成立度
- YouTuberがこれを読み上げるだけで笑いが取れるか？
- ツッコミが自然で、テンポが良いか？
- 視聴者が「わかるw」と共感するか？
- お笑いとして成立しているか？

### 3. 実用性
- YouTuberが実際に使いたくなるか？
- 編集で動画に組み込みやすいか？
- 炎上リスクは低いか？
- そのまま台本として使えるか？

### 4. 構文の質
- いじりポイントが的確か？
- ツッコミに「キレ」があるか？
- 構文タグが適切か？
- 文章のテンポ・語感が良いか？

## 出力形式（JSON）
{{
  "総合スコア": 7.5,
  "個別スコア": {{
    "シーンマッチング": 8,
    "ネタ成立度": 7,
    "実用性": 8,
    "構文の質": 7
  }},
  "合格判定": true,
  "改善ポイント": [
    "具体的な改善点1",
    "具体的な改善点2"
  ],
  "次回への指示": "次の分析で改善すべき点を具体的に指示（プロンプトに追加される）",
  "優れている点": [
    "良かった点1",
    "良かった点2"
  ]
}}

総合スコア{threshold}点以上で合格判定=true
JSONのみを出力してください。
"""

# ========================================
# 再分析用改善プロンプト
# ========================================
REFINEMENT_PROMPT_ADDITION = """

## 前回の評価フィードバック
{previous_feedback}

## 改善指示
{improvement_instructions}

上記のフィードバックを踏まえ、より高品質な分析を行ってください。
特に以下の点に注意してください：
{specific_focus_areas}
"""
